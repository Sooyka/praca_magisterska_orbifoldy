% mainfile: ../praca_magisterska_orbifoldy.tex
\chapter{Appendix about good orders and accumulation points}
% and Canor-Bendixon derivatives
%\todo{Not e between equivalence of being accumulation point and being in Cantor bendixon derivative}
\section{Definition of order of accumulation points}
\label{accumulation_points_definitions} 
%\todo{zmienić to wszystko na rangę cantora bendiksona}
%We start with one technical definition of "transitive order" that will be almost what we want
%and then, there will be the the definition of "order", which is the definition that we need.
%\begin{definition}
%(Inductive). 
%%We say, that the point $a$  from the topological space $X$ is an acccumulation 
%%point of the transitive order 0, when
%We say that the point is an acccumulation point of a transitive order $0$, when it is 
%an isolated point. 
%We say that the point is an acccumulation point of a transitive order $n + 1$, when it is 
%an acccumulation point (in the usual sense) of the accumulation points of the transitive 
%order $n$. 
%\end{definition}  
%The only issue of the above definition is that the point of the transitive order $n$ 
%is also a point 
%of the transitive order $k$, for all $0< k \leq n$. We want a definition of order such that 
%for any point, there is at most one integer that is its order. So we define:
%\begin{definition}
%We say that the point is an acccumulation point of order $n$ iff it is an acccumulation point 
%of the transitive order $n$ and it is not an acccumulation point of the transitive order $n+1$. 
%If the point is an acccumulation point of the transitive order for an arbitrary large 
%$n$ we say that 
%the  point is an acccumulation point of order $\omega$.
%\end{definition}

%Corespondence between accumulation points and cantor bendixon derivative are describen 
%in appendix \smalltodoII{link to appendix}. 
This definitions will be useful for us in chapter \ref{order structure}, the exact same copy 
of it is included there \ref{accumulation_points_definitions repetition} 
as well for a readers convenience .

We start with definition of being "at least of order $n$" that will be almost what we want
and then, there will be the definition of being "order", which is the definition that we need. \\
For a given set we define as follows:
\begin{definition}
(Inductive). 
%We say, that the point $a$  from the topological space $X$ is an acccumulation 
%point of the transitive order 0, when
We say that the point $x$ is an accumulation point of a set $X$ 
of order at least $0$, when it belongs to the set $X$. 
We say that the point $x$ is an accumulation point of a set 
of order at least $n + 1$, when it is 
an accumulation point (in the usual sense) of the accumulation points each of order at least 
$n$ i.e. in every neighbourhood of $x$ there is at least one accumulation point of a set $X$ 
of order at least $n$, distinct from $x$. 
\end{definition}  
%The only issue of the above definition is that the point of the transitive order $n$ 
%is also a point 
%of the transitive order $k$, for all $0< k \leq n$. We want a definition of order such that 
%for any point, there is at most one integer that is its order. So we define:
\begin{definition}
We say that the point is an accumulation point of order $n$ iff it is an accumulation point 
of order at least $n$ and it is not an accumulation point of order at least $n+1$. 
If the point is an accumulation point of order at least $n$ for an arbitrary large 
$n$ we say that 
the point is an accumulation point of order $\omega$.
\end{definition}
When we will say that a point is an accumulation point of some set without specifying an order 
then we will mean being an accumulation point in the usual sense; from the point of view 
of above definitions, that is, an accumulation point of order at least one.
%\todo{dopisać notację do punktów skupienia różnego stopnia}


\section{Lemmas}
\begin{lemma}\label{two_sets_lemma}
If $A, B \subseteq \mathbb{R}$ have no infinite strictly ascending sequences, then set 
$A + B \coloneqq \{a+b\ |\ a \in A, b \in B\}$ also have no infinite strictly ascending sequences. 
\end{lemma}
\noindent\subsubsection{Proof.}
Let $A$, $B$ have no infinite strictly ascending sequences. 
Let $c_n \in A + B$ are elements of some sequence. With a sequence $c_n$ there are 
two associated sequences $a_n$, $b_n$, such that, for all $n$, we have $a_n \in A$, 
$b_n \in B$ and 
$a_n + b_n = c_n$. Assume (for contradiction), that $c_n$ is an infinite strictly 
ascending sequence. 
Then $\forall_n\ a_{n+1}>a_n\ \lor\ b_{n+1} > b_n$. From the assumption $a_n$ has no infinite 
ascending sequence, so $a_n$ has a weakly decreasing subsequence $a_{n_k}$. But then 
subsequence $b_{n_k}$ must be strictly increasing, as $c_{n_k}$ is strictly increasing, what gives 
us a contradiction. 
%\Lightning 
$_\square$ 

\begin{lemma}\label{sum_lemma}
If $A, B \subseteq \mathbb{R}$ have no infinite strictly ascending sequences, then set 
$A \cup B$ also have no infinite strictly ascending sequences.
\end{lemma}
\subsubsection{Proof.}
Let $A$, $B$ have no infinite strictly ascending sequences. 
For the sake of contradiction, lets assume, that $A \cup B$ has an infinite strictly 
ascending sequence $c_n$. Let $c_{n_k}$, $c_{n_l}$ be subsequences of $c_n$ consisting 
of elements from, respectively $A$ and $B$. At least one of them must be infinite and 
strictly increasing, which gives us a contradiction. $_\square$ \\


%\section{Order preserving homeomorphisms}
Concerning accumulation points, we will use the terminology, that we introduced in 
\ref{accumulation_points_definitions}

\begin{lemma}\label{order_preserving_homeomorphism_theorem}
Let $A \subseteq \mathbb{R}$ has an order type $\alpha$. 
Let $A$ be such that every accumulation point of $A$ belong to $A$. Then $A$ has not only an
order type $\alpha$ but is also homeomorphic to $\alpha$. 
\end{lemma}
%\todo{dopisać, że to równoważność}
\subsubsection{Proof.}
%Let us observe, that $\alpha$ must be countable -- as $A$ is well ordered we can assign to every 
%element $a_1 \in A$ an non-empty open interval, between $a_1$ and it's succesor $a_2$. 
%From every such interval we can pick a rational number. From this we have injection of $A$ into 
%$\mathbb{Q}$. \\
Without loss of generality, let us assume, that $A$ has no infinite descending sequence 
(case with $A$ having no infinite ascending sequence is completely analogous). \\

As $A$ has an order type $\alpha$ we have that there is an order preserving bijection 
$f : \alpha \to A$. \\
We will prove the theorem by showing that $f$ is a homeomorphism. \\

For the continuity of $f$ and $f^{-1}$ it is sufficient to show, that for every open
$U \subseteq A$ and $V \subseteq \alpha$ 
from prebases of respective topologies, $f^{-1}[U]$ and $f[V]$ are open ($\ast$). \\
Prebase open sets in $A$ are the ones inherited from the order topology on $\mathbb{R}$, 
for all $s \in \mathbb{R}$:
\begin{align*}
\{r\ &|\ r<s\} \cap A\\
\{r\ &|\ s<r\} \cap A.
\end{align*}
Prebase open sets in $\alpha$ are from order topology, for all $\nu \in \alpha$:
\begin{align*}
\{\eta\ &|\ \eta<\nu\} \\
\{\eta\ &|\ \nu<\eta\}.
\end{align*} 

%From our induction assumption we have ($\ast$) checked for following prebase sets: \\
%$\{r\ |\ r<s\} \cap A_\mu$, for all $s < f(\mu)$. \\
%$\{\eta\ |\ \eta<\nu\}$, for all $\nu < \mu$, \\
%It was left to be shown, that ($\ast$) holds for the prebase sets: \\
%$\{r\ |\ r<f(\mu)\} \cap A_\mu$, \\
%$\{r\ |\ s<r\} \cap A_\mu$, for all $s \leq f(\mu)$\\
%$\{\eta\ |\ \eta<\mu\}$, \\
%$\{\eta\ |\ \nu<\eta\}$, for all $\nu \leq \mu$, \\ 

%Prebase set -- $\{r\ |\ r<f(\mu)\} \cap A_\mu$: \\
%We have that:
%\begin{align*}
%f^{-1}[\{r\ |\ s<f(\mu)\} \cap A_\mu] = \{\eta\ |\ \eta <\mu\},
%\end{align*}
%which is open. \\
Now, we will prove ($\ast$) case by case: \\

$\bullet$ Prebase set -- $\{r\ |\ r<s\} \cap A$: \\
Let $\nu \in \alpha$ be the smallest, that $s \leq f(\nu)$, then:
\begin{align*}
f^{-1}[\{r\ |\ r<s\} \cap A] = \{\eta\ |\ \eta<\nu\},
\end{align*}
which is open. \\ 

$\bullet$ Prebase set -- $\{r\ |\ s<r\} \cap A$: \\
Let $s < f(\mu)$. We have two cases: \\
-- $s \in A$: then let $\nu$ be such that $f(\nu)=s$. Then we have that:
\begin{align*}
f^{-1}[\{r\ |\ s<r\} \cap A] = \{\eta\ |\ \nu < \eta \},
\end{align*}
which is open. \\
-- $s \not\in A$: then, by the assumption of the theorem we know that $s$ is not an accumulation 
point of $A$. From this we conclude, that 
$\exists_{t\in A} (t<s \land \neg \exists_{t' \in A} t<t'<s)$. Let $\nu$ be such that $f(\nu) = t$. 
Then we have that:
\begin{align*}
f^{-1}[\{r\ |\ s<r\} \cap A] = \{\eta\ |\ \nu < \eta \},
\end{align*}
which is open. \\

$\bullet$ Prebase set -- $\{\eta\ |\ \eta<\nu\}$: \\
\begin{align*}
f[\{\eta\ |\ \eta<\nu\}] = \{r\ |\ r<f(\nu)\} \cap A,
\end{align*}
which is open. \\

$\bullet$ Prebase set -- $\{\eta\ |\ \nu<\eta\}$: \\
\begin{align*}
f[\{\eta\ |\ \nu<\eta\}] = \{r\ |\ f(\nu)<r\} \cap A,
\end{align*}
which is open.$_\square$

\textbf{Remark.} 
The reverse is also true: If $A\subseteqq \mathbb{R}$ is homeomorphic to $\alpha$, then 
every accumulation point of $A$ belongs to $A$. 




%For an ordinal $\mu < \alpha$, let us denote $f_\mu 
%\coloneqq f\raisebox{-0.5\depth}{\big|}_{\mu + 1}$ so 
%$f_\mu$ is defined on all ordinals less or equal to $\mu$. Then we have that
%$f = \bigcup\limits_{\mu < \alpha} f_\mu$. Let us also denote $A_\mu \coloneqq f_\mu[\mu+1]$ --
%the image of $\mu + 1$ (as a set of all ordinals less or equal to $\mu$) in $A$. 
%Let us remark, that $A_\mu$ has an order type $\mu + 1$.\\ 

%We will prove the theorem by inductively showing for all $\mu < \alpha$, that $f_\mu$ is a 
%homeomorphism, and by showing that this is sufficient for $f$ to be a homeomorphism. \\


%%For simplycity, we will take reverse (decreasing) order on $A$ i.e. $1$ will be the smallest 
%% element 
%%(so for example $0 > 1$ in this order)
%%% and in general $x < y $ in the ussual order iff $x > y$ in 
%%the reverse order).  \\
%%%\todo{dopisać dowód}
%%%Since $A$ is well ordered (as we know from \ref{well_order}) it has an order preserving 
%%%bijection with some ordinal number. 

%%We will inductively show that the family of maps  $f_\mu$, 
%%indexed by ordinal numbers less 
%%or equal
%%%\smalltodoII{fix this}
%%than 
%%$\alpha$. 
%%For every $\mu < \alpha$ homeomorphism $f_\mu$ will be between 
%%prefix of $\alpha$ homeomorphic to $\nu + 1$ (so on all ordinals less 
%%or equal to $\nu$) 
%%and some prefix of $A$. 
%%We will construct them in such a way, that for any $\mu_1 < \mu_2 
%%< \alpha$ function $f_{\mu_2}$ restricted to the ordinals less or equal to 
%%$\mu_1$ coincides with $f_{\mu_1}$.
%%Then we will take $f \coloneqq \bigcup\limits_{0 \leq \mu < 
%%\alpha} f_\mu$ (so $f(\mu) \coloneqq f_\mu(\mu)$). \\
%Our inductive assumption for a given $\mu$ will be that 
%for all $\nu < \mu$ function $f_\nu$ is a
%%n order preserving 
%homeomorphism 
%between $\nu + 1$ (so defined on all ordinals less 
%or equal to $\nu$) 
%and $A_\nu$; and that for every $\nu_1 < \nu_2 < \mu$ we have 
%$f_{\nu_2}\raisebox{-0.5\depth}{\big|}_{\nu_1 + 1} = f_{\nu_1}$.
%%Then we will put $f = f_\alpha$
%\\[8pt]
%%restricted to the ordinals less or equal than $\nu_1$ coincides with $f_{\nu_1}$. \\ 
%%Our inductive assumtion will be, that for all $\mu \leq \alpha$ 
%%function $f_\mu$ is a homeomorphism 
%%between prefix of $\alpha$ homeomorphic to $\mu$ and some \\
%%$\bullet$ $\mu = 0$: Function $f_0$ is an empty function and as such it is an order preserving 
%%homeomorphism. \\
%$\bullet$ $\mu = 0$: \\
%%Let $a_0$ be the smallest element of $A$. 
%%We take $f_0$ as a function on $\{0\}$ taking value $a_0$. 
%%Both $0$ and $a_0$ are the smallest elements of, respectively, $\alpha$ and $A$ 
%%so $f_0$ is defined between prefix of $\alpha$ of all ordinals less or equal to $0$, and 
%%some prefix of $A$. 
%%Function $f_0$ also preserves order on one element set.
%Function $f_0$ is an homeomorphism between one element sets, both with discreate topology. \\[8pt]
%$\bullet$ $\mu < \alpha$ is a successor ordinal:\\ 
%%From an inductive assumption 
%%we have an order preserving homeomorphism $f_{\mu - 1}$ between all ordinals 
%%less or equal to $\mu - 1$ and some prefix of $A$. 
%%We define $f_\mu$ on all numbers less or equal to $\mu - 1$ to be equal $f_{\mu-1}$. \\
%%%Now we have two cases: \\ 
%%It remains to define $f_\mu(\mu)$. 
%%As $A$ is well ordered it is well defined to take successor of an element of $A$. 
%%We define $f_\mu(\mu)$ to be a succesor of $f_{\mu - 1}(\mu-1)$ in $A$. As such (and from 
%%inductive assumption) it is indeed defined as a function between prefix of $\alpha$ of all 
%%ordinals less or equal to $\mu$, and 
%%some prefix of $A$.
%%\\
%%Now we want to prove, that $f_\mu$ preservse the order. From the inductive assumption 
%%it preserves the order up to $\mu - 1$. As $\mu$ is the successor of $\mu - 1$ and 
%%$f_\mu(\mu)$ is a successor of $f_\mu(\mu-1)$, we have that $f_\mu$ is indeed an order preserving 
%%function. \\
%%Now we want to prove that $f_\mu$ is a homeomorphism. 
%Since $\mu$ is a successor ordinal, $\mu-1$ exists. \\
%From inductive assumtion we know,
%that $f_{\mu - 1} : \mu \to A_{\mu - 1}$ is a homeomorphism, 
%so it is sufficient to show that preimages of open 
%sets containing $f_\mu(\mu)$ and images of open sets containing $\mu$ are open. \\
%Since $f_\mu(\mu)$ is a successor (because $f_\mu$ preserves the order) 
%and since $A_\mu$ is well ordered, we have, that $f_\mu(\mu)$ 
%is an isolated point in $A_\mu$. \\
%Simmilarly $\mu$ is an isolated point in $\mu + 1$ as an successor ordinal. \\
%From this we have, that open sets containing $f_\mu(\mu)$ (resp. $\mu$) are of the form 
%\begin{equation}\label{form of open sets}
%U \cup \{f_\mu(\mu)\} \textrm{ (resp. } V \cup \{\mu\}\textrm{)} 
%\end{equation}
%for some $U$ -- open set in $A_{\mu-1}$. 
%(resp. $V$ -- open set in $\mu$). \\
%Let $U$ be an open set in $A_{\mu - 1}$ and $V = f_{\mu - 1}^{-1}[U]$ an open set in $\mu$. \\
%we have that 
%%$f_\mu[V] = $
%%\smalltodoII{może rozwinąć} 
%%From this this is clear. \\ 
%\begin{gather}
%f_\mu^{-1}\left[ U \cup \{f_\mu(\mu)\} \right] = f_\mu^{-1}\left[ U \right] \cup 
%f_\mu^{-1}\left[ \{f_\mu(\mu)\} \right] =
%%\underbrace{f_{\mu - 1}^{-1}\left[ U\right]}_{\textrm{open in } \mu} 
%f_{\mu - 1}^{-1}\left[ U\right] \cup \{\mu\} = V \cup \{\mu\}
%\end{gather}
%and
%\begin{gather}
%f_\mu \left[ V \cup \{\mu\} \right] = f_\mu \left[ V \right] \cup f_\mu\left[ \{\mu\} \right] = 
%%\underbrace{f_{\mu - 1} \left[ V \right]}_{\textrm{open in } A_{\mu - 1}} 
%f_{\mu - 1} \left[ V \right] \cup \{f_\mu (\mu)\} = U \cup \{f_\mu(\mu)\}
%\end{gather}
%so by \ref{form of open sets}, we have that preimages of open 
%sets containing $f_\mu(\mu)$ and images of open sets containing $\mu$ are indeed open. \\[8pt]
%%Let us observe, that 
%%Lets take \todo{finish}
%$\bullet$ $\mu < \alpha$ is a limit ordinal: \\ 
%%\todo{net and so on}
%%From the inductive assumption, for each $\nu < \mu$ we have an order preserving homeomorphism 
%%$f_\nu$ on the ordinals less or equal to $\nu$ and those functions pairwise coincide 
%%on the intersections 
%%of their domains. For every ordinal $\nu < \mu$ we define 
%%$f_\mu(\nu) \coloneqq f_\nu(\nu)$. It remains to define $f_\mu(\mu)$. \\
%%We consider a net $\phi_\mu \coloneqq \{f_\nu(\nu)\}_{\nu<\mu} \subset \mathbb{R}$
%%%, indexed by all $\nu < \mu$
%%. From the inductive assumption we know that the domain of the net $\phi_\mu$, as 
%%well as it's image is well ordered and that the net $\phi_\mu$ 
%%is an order preserving homeomorphism.
%%% is  this is a well ordered net. \todo{napisać jakoś lepiej tę własność}
%%Now we will show that the net $\phi_\mu$ has a limit in $A$. \\
%%First we will show, that $\phi_\mu$ has a limit in $\mathbb{R}$. For this, we will show that 
%%$\phi_\mu$ is bounded. \\
%%Order type of the image of $\phi_\nu$ is equal to $\mu$ and it is a prefix of $A$. 
%%For now, let us assume, that 
%Let $f_{\nu<\mu} \coloneqq f_{\mu}\Big|_{\{\nu\,|\,\nu<\mu\}}$. Then $f_{\nu < \mu}$ 
%is a well ordered net from $\mu$ to $\mathbb{R}$ with image $A_\mu\setminus\{f(\mu)\}$. 
%It is bounded by $f(\mu)$, so,
%as $\mathbb{R}$ is Hausdorff, from \cite{Kelley1975} (chapter 2, 
%theorem 3, page 67) we know, that $f_{\nu<\mu}$ has a unique limit as a net. Let us call this 
%limit $r$. This limit is 
%as well an accumulation point of $A$, so by the assumption of the theorem, we have that 
%$r \in A$.
%\begin{observation}
%We have that $r = f_\mu(\mu)$.
%\end{observation}
%\textit{Proof.} \\
%For the sake of contradiction, let us assume, that $r > f_\mu(\mu)$. 
%Then, as r is an accumulation 
%point of $f_{\nu<\mu}$, we have that $\exists_{\nu<\mu}\ f_\mu(\mu)<f_\mu(\nu)$. 
%Which is a contradiction as $f$ preservers the order. Hence, $r \leq f_\mu(\mu)$.
%Now, for the sake of contradiction, let us assume, that $r < f_\mu(\mu)$. \\
%As we have, that $r \in A$, we have, that there exist some $\eta$ such that $r = f(\eta)$. 
%Since $f$ preserves order and we assumed that $r < f_\mu(\mu)$, we have, that $\eta < \mu$. 
%But then, as $\mu$ is a limit ordinal, we have, that $\eta +1 < \mu$ as well. From this, 
%we conclude that there exist some ordinal $<\mu$, namely $\eta +1$, such that $f_\mu(\eta+1) > r$. 
%This however is a contradiction, as $f$ preserves the order and $r$ is an accumulation point. 
%Hence, $r \geq f_\mu(\mu)$. \\
%From this we conclude, that indeed $r = f_\mu(\mu)$. $_\square$\\
%%We have that $\forall_{\nu<\mu}\  f(\nu)<r$ \\ 
%%The limit is $f_\mu(\mu)$ as it is the 
%%biggest element of $A_\mu$ and $f_\mu$ is well ordered net. 
%%\\
%%As we have \ref{accumulation_points_of_the_set} 
%%%\newpage
%%- show that if $\mu < \omega^n$, then it is earlier than $\frac{n}{2}$ something something\\
%%\smalltodo 
%%\\
%%- done\\
%%XD \\
%%$le\ XD$ \\ 
%%For the sake of contradiction, let us assume, that $\phi_\nu$ is unbounded. \\
%%There exist $n$ such that $\phi_\nu < \omega^n$. \\
%%The only unbounded in $\mathbb{R}$ prefix of $A$ is a whole $A$. \\ 
%%From this we conclude that $A$ schould have order type of $\alpha$.
%%\\ 
%%Then $f_\mu$ is a ordinal indexed sequence.
%For the continuity of $f$ and $f^{-1}$ it is sufficient to show, that for every 
%$U \subseteq A_\mu$ and $V \subseteq \mu+1$ 
%in prebases of respective topologies, $f_\mu^{-1}[U]$ and $f_\mu[V]$ are open ($\ast$). \\
%Prebase open sets in $A_\mu$ are the ones inherited from the order topology on $\mathbb{R}$, 
%for all $s \in \mathbb{R}$:
%\begin{align*}
%\{r\ &|\ r<s\} \cap A_\mu\\
%\{r\ &|\ s<r\} \cap A_\mu.
%\end{align*}
%Prebase open sets in $\mu+1$ are from order topology, for all $\nu \in \mu+1$:
%\begin{align*}
%\{\eta\ &|\ \eta<\nu\} \\
%\{\eta\ &|\ \nu<\eta\}.
%\end{align*}
%From our induction assumption we have ($\ast$) checked for following prebase sets: \\
%$\{r\ |\ r<s\} \cap A_\mu$, for all $s < f(\mu)$. \\
%$\{\eta\ |\ \eta<\nu\}$, for all $\nu < \mu$, \\
%It was left to be shown, that ($\ast$) holds for the prebase sets: \\
%$\{r\ |\ r<f(\mu)\} \cap A_\mu$, \\
%$\{r\ |\ s<r\} \cap A_\mu$, for all $s \leq f(\mu)$\\
%$\{\eta\ |\ \eta<\mu\}$, \\
%$\{\eta\ |\ \nu<\eta\}$, for all $\nu \leq \mu$, \\ 

%Prebase set -- $\{r\ |\ r<f(\mu)\} \cap A_\mu$: \\
%We have that:
%\begin{align*}
%f^{-1}[\{r\ |\ s<f(\mu)\} \cap A_\mu] = \{\eta\ |\ \eta <\mu\},
%\end{align*}
%which is open. \\
%Prebase set -- $\{r\ |\ s<r\} \cap A_\mu$: \\
%Let $s < f(\mu)$. We have two cases: \\
%-- $s \in A$: then let $\nu$ be such that $f(\nu)=s$. Then we have that:
%\begin{align*}
%f^{-1}[\{r\ |\ s<r\} \cap A_\mu] = \{\eta\ |\ \nu < \eta \},
%\end{align*}
%which is open. \\
%-- $s \not\in A$: then, by the assumption of the theorem we know that $s$ is not an accumulation 
%point of $A$. From this we conclude, that 
%$\exists_{t\in A} (t<s \land \neg \exists_{t' \in A} t<t'<s)$. Let $\nu$ be such that $f(\nu) 
%= t$. 
%Then we have that:
%\begin{align*}
%f^{-1}[\{r\ |\ s<r\} \cap A_\mu] = \{\eta\ |\ \nu < \eta \},
%\end{align*}
%which is open. \\
%Prebase set -- :
%a\\
%This concludes the inductive part of the proof, that for every $\mu < \alpha$ we have that 
%$f_\mu$ is a homeomorphism. Now we will show, that this is sufficient for $f$ to be a 
%homeomorphism. \\
%\todo{wszystkie ograniczone otwarte działają}
%\todo{wszystkie nieograniczone też}
%%Firstly we will determine the order type of $A$. 
%%From the lemma \ref{well_order} we know, that $A$ is well ordered, so it has order type 
%%of some ordinal number. From this and 
%%from the theorem \ref{greatest \apots} we know, that for the point $1-\frac{n}{2}$ there exist 
%%a neighborhood $U=(1-\frac{n}{2}-\varepsilon,1-\frac{n}{2}+\varepsilon)$ such that $U \cap 
%%A$ is homeomorphic to $\omega^n$. From this, and again from theorem \ref{greatest \apots} 
%%we have that $A \cap [1,1-\frac{n}{2})$ is homeomorphic with $\omega^n$. 
%%From this $A$ is homeomorphic with $\alpha$.

\begin{lemma}\label{accumulation_points_and_order}
Let $A \subseteq \mathbb{R}$ be a bounded, well ordered set. 
Then $A$ has an accumulation point $a$ of order 
$n \in \mathbb{N}$ (it may be that $a \notin A$) iff order type of $A$ is at least $\omega^n$. 
\end{lemma}

\subsubsection{Proof.} 

Inductive, with respect to $n$ in $\omega^n$.

$\bullet$ $n=0$
Let us suppose, that $A$ has an accumulation point of order $0$.
Having an accumulation point of order $0$ means that $A$ is non-empty. As that it has an order 
type of at least $\omega^0 = 1$. \\

Let us suppose, that $A$ has order type at least $\omega^0=1$. Then it is non-empty, so it 
has at least one accumulation point of order $0$. 

$\bullet$ Induction step

Let us suppose that $A$ has an accumulation point $a$ of order $n+1$. This means that every 
neighbourhood of $a$ we can find infinitely many accumulation points of $A$ of order $n$. 
Let take one such neighbourhood and one such family $\{b_i\}_{i \in \mathbb{N}}$ 
of accumulation points of order $n$. 
Let us then take family of pairwise disjoint neighbourhoods $\{U_i\}_{i\in\mathbb{N}}$ of 
$\{b_i\}_{i \in \mathbb{N}}$. Let $A_i \coloneqq U_i\cap A$. 

From the induction assumption for all $i$, we have that $A_i$ is of order type at least 
$\omega^n$. As that, we managed to show an pairwise disjoint inclusions of countably many sets 
of order type at least $\omega^n$ into $A$. As that we have the order preserving inclusion of 
$\omega^{n+1}$ into $A$, so $A$ is of order type at least $\omega^{n+1}$. \\

Let us now suppose that $A$ has the order type of at least $\omega^{n+1}$. Then, we can find 
a family $\{A_i\}_{i \in \mathbb{A}}$ 
of pairwise disjoint subsets of $A$, each of order type $\omega^{n}$, with the property $(\ast)$, 
that $\forall_{i,j\in\mathbb{N}}i<j \implies \forall_{x \in A_i,y\in A_j} x< y$. 

From the inductive 
assumption, for all $i$, we have that $A_i$ has an accumulation point of order $n$. Let 
$\{b_i\}_{i\in\mathbb{N}}$ be the set of those accumulation points.
Because of the property $(\ast)$, those accumulation points are pairwise distinct, between 
$A_i, A_j$, with $i\neq j$. Since $A$ is bounded, we have that, the set $\{b_i\}_{i\in\mathbb{N}}$ 
is bounded, so it has an accumulation point $a$. As an accumulation point of the accumulation 
points of order $n$, it is an accumulation point of order $n+1$. $_\square$ 

\begin{corollary}\label{that_important_corollary}
Let $A \subseteq \mathbb{R}$ be a bounded, well ordered set of the order type $\omega^n$. Then 
it has exactly one accumulation point $a'$ of order $n$. This point has the property that 
$\forall_{a\in A}\ a<a'$.  
\end{corollary}
\subsubsection{Proof.} 
From \ref{accumulation_points_and_order} we know that $A$ has at least one accumulation point 
$a'$ of order $n$. 

For the sake of contradiction, let us assume, that there exists an accumulation 
point $\bar{a}$ of order $n$ such that $\exists_{a\in A}\ a\geq \bar{a}$. We have that $A$ has 
the order type $\omega^n$, which means that $\forall_{a_1\in A}\exists_{a_2 \in A}\ a_1 < a_2$. 
From this, we have, that $\exists_{a_0} a_0 > \bar{a}$. But then, we would have that the prefix 
$(-\infty, \bar{a}] \cup A$ of $A$ has an accumulation point $\bar{a}$ of order $n$. 
From this, from \ref{accumulation_points_and_order} we would conclude, 
that $(-\infty, \bar{a}] \cup A$ is of 
order type at least $\omega^n$, which leads to the contradiction, as $(-\infty, \bar{a}] \cup A$ 
is a proper subset of $A$. Thus, we have, that for all accumulation points $\bar{a}$ of $A$ of 
order $n$ we have that $\forall_{a\in A}\ a<\bar{a}$. 

It remains to show that there is only one 
such accumulation point - $a'$. For the sake of contradiction, let us assume, that 
there exists an accumulation point of $A$ of order $n$, named $\bar{a}$, such that 
$\bar{a} \neq a'$. Let us assume that $\bar{a} < a'$. Then, as in every neighbourhood 
of $a'$ there is a point from $A$, we have 
that $\exists_{a_0} a_0 > \bar{a}$. The absurdity of this statement is shown above. 
Case where $\bar{a} > a'$ is completely analogous. $_\square$


\begin{lemma}\label{The order does not grow lemma}
For $A, B \subseteq \mathbb{R}$, if $r \in \mathbb{R}$ is an accumulation point 
of order $m$ for $A$ and $n$ for $B$ and $m \leq n$, then $r$ 
is an accumulation point of order at most $n$ for $A \cup B$.  
\end{lemma}%\todo{Zapytać się kogoś z topologii/teorii mnogości}
\subsubsection{Proof.}
Inductive. 

$\bullet$ $n = 0$. Then $r$ is an isolated point of $B$ and either $r$ is isolated point of $A$ 
or $r \not\in A$. From this we have that there exists $U_1, U_2$ such that $B \cap U_1 = \{r\}$ and 
$A \cap U_2 \subseteq \{r\}$. From this we have that $(A\cup B) \cap (U_1\cap U_2) = \{r\}$. 
So $r$ is an isolated point of $A \cup B$.

$\bullet$ Inductive step. Let us suppose that for all $k < n$, the statement holds. Let $r$ 
be an accumulation point of order $n$ of $B$ and order $m$ of A, where $m \leq n$. From this 
we have that there exists $U_1, U_2 \ni r$ 
such that in $B\cap U_1$ there are only accumulation points 
of $B$ of order at most $n-1$ and in $A \cup U_2$ there are only accumulation points of $A$ 
of order at most $m-1$. From this, from the inductive assumption we have that in 
$(A \cup B) \cap (U_1 \cap U_2)$ there are only accumulation points of order at most $n-1$ of 
$A \cup B$.  
This means that $r$ is an accumulation point of order at most $n$ of $A\cup B$. 

We also know that, in every $U_1, U_2 \ni r$, there are accumulation points of order exactly $n-1$ 
of $B$ and exactly $m-1$ for $A$. From the inductive assumption we have then, that in 
$(A \cup B) \cap (U_1 \cap U_2)$ there are accumulation points of order $n-1$ of $A\cup B$. 
This means that $r$ is an accumulation point of order exactly $n$ of $A\cup B$.
%This means 
$_\square$   

%colorally
%coloraly
%corolary
%corollary

\begin{corollary}\label{derivative and sum is commutative}
Let $A^{(n)}$ be the set of all accumulations point of order $n$ of $A$. Then
for every $n\in\mathbb{N}$ we have that $(A\cup B)^{(n)} = A^{(n)}\cup B^{(n)}$.
\end{corollary}
\subsubsection{Proof.}
%````````````````````````````````````````````````````````````````````````````````````````````````````
Every accumulation point of either $A$ or $B$ is also an accumulation point of $A\cup B$, so 
$(A\cup B)^{(n)} \supseteq A^{(n)}\cup B^{(n)}$.

From \ref{The order does not grow lemma} we know, that for any point $r\in \mathbb{R}$, if 
$r \in (A\cup B)^{(n)}$, then $r \in  A^{(n)}\cup B^{(n)}$. $_\square$

\begin{lemma}\label{key_lemma}
For two bounded, well ordered sets $A, B \subseteq \mathbb{R}$, with order types, respectively 
$\omega^m$ 
and $\omega^n$, 
such that $m < n$, and that $\forall_{x\in A\cup B}\exists_{b\in B}x<b$, we have 
that order type of $A \cup B$ is well defined and 
equal to $\omega^n$.
\end{lemma}
\subsubsection{Proof.}
From \ref{sum_lemma}, we know, that $A\cup B$ is well ordered. As such its order type is well 
defined and equal to some ordeal number $\gamma$. 

We will show that $\gamma \leq \omega^n$ and $\gamma \geq \omega^n$, 
thus showing that $\gamma = \omega^n$.

Let $f : \omega^n \to B$ and $g : A \cup B \to \gamma$ be order preserving bijections. 
%Through this proof when we will write "corresponding" in regards of some subset of $\omega^n$

$\bullet$ $\omega^n \leq \gamma$: 

%Let us assume for the sake of contradiction, that $\gamma < \omega^m$. Then, we have an one-to-one 
%function that preserves the order from a strictly greater ordinal $\omega^m$ to a strictly 
%smaller one $\gamma$, which is a contradiction.  
We have that  
$g\circ f : \omega^n \to \gamma$ 
is an order preserving injection, thus, $\omega^n \leq \gamma$. 

$\bullet$ $\omega^n \geq \gamma$: 

From \ref{that_important_corollary} we know, that $B$ has exactly one accumulation point $b'$ of 
order $n$. This point has the property that $\forall_{b\in B}\ b<b'$.
%From the assumptions, we know that there exists $b_0 \in B$, such that $\forall_{a\in A}\ a<b_0$. 
%From this, we know that $(A\cup B) \cap (b_0,\infty) = B \cap (b_0, \infty)$. 
%Let us name the suffix $(A\cup B) \cap (b_0,\infty)$ of $A\cup B$ as $S$.
%As for the given point, the property of being an accumulation point od order $n$ of 
%some set depends on the arbitrary small neighbourhood of that point, and $B$ and $A\cup B$ 
%does not differ on the neighbourhood $S$ of $b'$, 
%we have, that $b'$ is an accumulation point od order $n$ also for $A \cup B$. 
As $b'$ is the only accumulation point of 
order $n$ for $B$ and from \ref{that_important_corollary} we know also that 
$A$ has no accumulation points of order $n$, from \ref{The order does not grow lemma} we know, 
that $A\cup B$ has exactly one accumulation point of order $n$, namely $b'$. 

%From this, we have that $g^{-1}[B \cap (b_0, \infty)]$ is a suffix of $\gamma$. Let us name this 
%suffix $S$. We know that $B \cap (b_0, \infty)$ is a suffix of $B$ and that $B$ is of 
%the order type $\omega^n$, so $B \cap (b_0, \infty)$ has no greatest element. We have also that 
%$g$ is order preserving bijection, so $S$ also has no greatest element. 
%This means that 
%$\forall_{s\in S}\exists_{s'\in S}\ s < s'$. 
%From \ref{that_important_corollary} we know, that $B$ has exctly one accumulation point $b'$ of 
%order $n$ with the propertie that $\forall_{b\in B}\ b<b'$. From this we 
%We have thatLet $s = \max\{b_0, b_1\}$. 
%This $b_2$ has the property that 
%$\exists_{\epsilon > 0 }\forall_{p \in P}\ p < b_2-\varepsilon$. 

For the sake of contradiction, let us assume that $\omega^n < \gamma$. But then, 
there is some proper prefix of $A\cup B$ with order type $\omega^n$. Let us name that 
prefix as $P$. From \ref{accumulation_points_and_order} we know, that 
$P$ has an accumulation point $p'$ of order $n$. 
%so there is some $x \in \mathbb{R}$, 
%such that $\exists_{b\in B} x<b$ and that $C \coloneqq (A\cup B)\cap (-\infty, x)$ 
%has an order type $\omega^n$.
Let $b_1 \in B$ be such that $\forall_{p \in P}\ p<b_1$. Such $b_1$ exists, because $P$ is 
a proper prefix of $A\cup B$, so $\exists_{x\in A\cup B}\forall{p\in P} p < x$, and 
%and $(A\cup B) \cap (b_0,\infty) = B \cap (b_0, \infty)$, so 
from the assumptions of the lemma we have that 
$\forall_{x \in A\cup B}\exists_{b \in B} x < b$.
We have that $p' \leq b_1$. But we have also that $b_1 < b'$, so $p' \neq b'$. This gives us the 
contradiction, as $b'$ is the only accumulation point of order $n$ in $A\cup B$. $_\square$

% This gives us a contradiction with \ref{} though, as 
%the only accumulation point of order $n$ in $B$ is strictly greater than $s$ (as it is 
%greater than ) and 
%$\exists_{\epsilon > 0 }\forall_{p \in P}\ p < b_2-\varepsilon$, so any accumulation point 
%of $P$ is smaller or 





